<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style.css">
    <title>Challenge Javascript 8</title>
</head>

<body>
    <h1>Challenge Javascript 8</h1>
    <h2>Visible dans la console</h2>


    <script>
        //ENONCE
        //Créer un tableau de notes qui contient toutes les notes des données de tests en dessous.
        //Créer un tableau pour les pourboires et les totaux (‘tips’ et ‘totals’).
        //Utiliser la fonction ‘calcTip’ codée précédemment pour calculer
        //le pourboire et le total pour chaque note et les mettre dans leurs tableaux correspondants.
        //Bonus : Écrire une fonction ‘calcAverage’ qui prend un tableau comme argument
        // et qui calcule la moyenne de tous les nombres du tableau. Écrire dans la console la moyennes des totaux.
        //Données de test : Valeurs des notes : 22, 295, 176, 440, 37, 105, 10, 1100, 86, 52

        //fonction ‘calcTip’ créée dans le challenge 7
        function calcTip(note) {
            //initialiser variable pourcentage
            let pourcentage;

            if (note >= 50 && note <= 300) {
                pourcentage = 0.15;
            }
            else {
                pourcentage = 0.20;
            }
            let tip = note * pourcentage;
            let total = note + tip;

            // Retourner un objet contenant les données pour l'affichage
            //un objet est renvoyé par la fonction avec le mot-clé return et {}
            //chaque propriété de l'objet est une paire clé-valeur
            //la clé est l'identifiant (note, pourcentage, etc...)
            //la valeur est est le résultat correspondant
            //de cette façon on peut accéder aux informations par leur nom
            return {
                note: note,
                pourcentage: pourcentage,
                tip: tip,
                total: total
            };

        }

        //tableau contenant les données de test
        let notes = [22, 295, 176, 440, 37, 105, 10, 1100, 86, 52];

        // Initialiser des tableaux vides pour les pourboires ('tips') et totaux ('totals')
        let tips = [];
        let totals = [];

        // Parcourir chaque montant du tableau de notes 
        //avec une boucle 'for'
        for (let i = 0; i < notes.length; i++) {
            // Calculer le pourboire en appelant 'calcTip' pour chaque note
            //result change à chaque itération de la boucle for
            //à chaque itération le pourboire correspondant
            //à la note est calculé et stocké dans la variable result
            //la variable result est un objet renvoyé par la fonction
            //et contenant la note, le tip, le pourcentage et le total
            let result = calcTip(notes[i]);

            // Ajouter le pourboire "tip" (variable au singulier) 
            //dans le tableau 'tips'
            //à chaque itération de la boucle for 
            //le pourboire correspondant à la note, calculé
            //par la fonctin calcTip() est ajouté dans le tableau 'tips'
            tips.push(result.tip);

            // Ajouter le "total" (variable au singulier)  (note + pourboire) 
            //dans le tableau 'totals'
            totals.push(result.total);
        }

        // Afficher les résultats 
        //sous forme de 3 tableaux
        console.log("Montants des notes : ", notes);
        console.log("Pourboires : ", tips);
        console.log("Totaux : ", totals);

        //fonction pour calculer la moyenne d'un tableau et l'afficher dans la console
        function calcAverage(tableau) {
            //intialiser sum avant la boucle
            let sum = 0;
            for (let i = 0; i < tableau.length; i++) {
                //ajouter à sum la valeur de chaque élément du tableau
                sum += (tableau[i]);
            }
            //calculer la moyenne
            moyenne = sum / tableau.length;
            //retourner la moyenne
            return moyenne;

        }
        // Appeler la fonction sur chacun des 3 tableaux
        const averageTotals = calcAverage(totals);
        const averageNotes = calcAverage(notes);
        const averagePourboires = calcAverage(tips);

        // Afficher les moyennes des 3 tableaux
        console.log("Moyenne des totaux : ", averageTotals);
        console.log("Moyenne des notes : ", averageNotes);
        console.log("Moyenne des pourboires: ", averagePourboires);


    </script>


</body>

</html>