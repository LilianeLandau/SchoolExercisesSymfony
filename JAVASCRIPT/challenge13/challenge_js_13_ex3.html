<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style.css">
    <title>Challenge Javascript 13 - Exercice 3</title>
</head>

<body>
    <h1>Challenge Javascript 13 - Exercice 3</h1>
    <h2>Visible dans la console</h2>

    <h3>Exercice 3</h3>
    <p>On a un tableau √† 2 dimensions appel√© ‚ÄògameEvents‚Äô
        avec le log de tous les √©v√®nements qui se sont pass√©s pendant le match.
        La premi√®re case d‚Äôun sous-tableau correspond √† la minute de l‚Äô√©v√®nement,
        la 2√®me case correspond au type d‚Äô√©v√®nement.</p>
    <ol>
        <li>
            Cr√©er un tableau ‚Äòevents‚Äô des diff√©rents √©v√®nements qui se sont d√©roul√©s (pas de doublon !).
        </li>
        <li>
            Apr√®s que le jeux soit fini, on a d√©cid√© que le carton jaune de la minute 64 n‚Äô√©tait pas juste, Le supprimer
            du log d‚Äô√©v√®nements.
        </li>
        <li>Calculer et afficher ce texte dans la console : ‚ÄúUn √©v√®nement est apparu en moyenne toutes les 9 minutes‚Äù.
            (Un jeu de foot dure 90 minutes).</li>
        <li>
            Faire une boucle sur ‚ÄògameEvents‚Äô et afficher pour chaque √©l√©ment dans la console s‚Äôil s‚Äôest d√©roul√© dans la
            premi√®re ou deuxi√®me moiti√© du jeu :
            [PREMI√àRE MOITI√â] 17 . ‚öΩÔ∏è GOAL
        </li>
    </ol>




    <script>
        //DONNEES DE L'EXERCICE
        const gameEvents = [
            [17, "‚öΩ GOAL"],
            [36, "üîÅ Substitution"],
            [47, "‚öΩ GOAL"],
            [61, "üîÅ Substitution"],
            [64, "üü® Yellow card"],
            [69, "üü• Red card"],
            [70, "üîÅ Substitution"],
            [72, "üîÅ Substitution"],
            [76, "‚öΩ GOAL"],
            [80, "‚öΩ GOAL"],
            [92, "üü® Yellow card"],
        ];

        //EXERCICE 3 * 1_ Cr√©er un tableau ‚Äòevents‚Äô des diff√©rents √©v√®nements
        // qui se sont d√©roul√©s (pas de doublon !).
        console.log("EXERCICE 3 * CREER UN TABLEAU EVENTS (tansformer l'objet en tableau)");

        //√©tape 1 - utiliser la fonction map() pour extraire les √©v√©nemnts 
        //map() parcourt chaque √©l√©ment du tableau origina
        //pour chaque √©l√©ment map() appelle une fonction de rappel (callback),
        //ici c'est function(event)
        //le r√©sultat de cette fonction pour chaque √©l√©ment est ajout√©
        //√† un nouveau tableau
        //√† la fin map() est utilis√© pour cr√©er un novueau 
        //tableau nomm√© events en extrayant les deuxi√®me √©l√©ment (index 1)
        //de chaque sous-tableau dans gameEvents
        const events = gameEvents.map(function (event) {
            // il est demand√© de retourner uniquement le type d'√©v√©nement 
            //(deuxi√®me √©l√©ment du sous-tableau)
            return event[1];
        });
        console.log(events);
        // √âtape 2 : Utiliser Set() pour √©liminer les doublons
        //on supprime tous les √©v√©nements survenus 2 fois
        //Set() est un objet en JavaScript permettant de stocker
        //des valeurs uniques. Set conserve l'ordre.
        //on peut parocurir Set avec une boucle
        //ici new Set(events) cr√©e un nouveau Set √† partir du tableau events
        //en √©liminant automatiquement les doublons
        //ces valeurs sont stock√©es dans uniqueEvents
        //l'op√©rateur de d√©composition repr√©sent√© par 3 points (...)
        //permet d'obtenir les √©l√©ments individuels
        //d'un √©l√©ment it√©rable (comme un tableu ou une string)

        //√©tapes :
        //___ new Set(events) : cr√©e un ensemble contenant uniquement
        //les valeurs uniques du tableau events
        //___  [... new Set(events)] : convertit cet ensemble (Set)
        //en tableau gr√¢ce √† l'op√©rateur de d√©composition
        const uniqueEvents = [...new Set(events)];
        console.log(uniqueEvents);


        //EXERCICE 3 * 2_Apr√®s que le jeux soit fini, on a d√©cid√© que le 
        //carton jaune de la minute 64 n‚Äô√©tait pas juste,
        // Le supprimer du log d‚Äô√©v√®nements.
        console.log("EXERCICE 3 * SUPPRIMER LE CARTON JAUNE DE LA MINUTE 64- AFFICHER");


        // D'abord : trouver l'index de l'√©v√©nement √† la minute 64
        //on utilise la m√©thode findIndex() qui retourne l'index
        //du premier √©l√©ment de l'it√©rable qui satisfait la condition
        //la fonction de rappel function(event) v√©rifie si la
        //premi√®re valeur de chaque sous-tableau event[0]
        //est √©gale √† 64
        const indexMinute64 = gameEvents.findIndex(function (event) {
            return event[0] === 64;
        });

        //Ensuite :  Supprimer cet √©l√©ment si l'index de la minute 64 est trouv√©
        //si findIndex ne trouve pas de correspondance alors elle retourne -1
        if (indexMinute64 !== -1) {
            //avec splice(indexMinute64,1) on supprime un seul √©l√©ment
            //situ√© √† cet index 
            gameEvents.splice(indexMinute64, 1);
        }

        console.log(gameEvents);


        //EXERCICE 3 * 3_Calculer et afficher ce texte dans la console : 
        //‚ÄúUn √©v√®nement est apparu en moyenne toutes les 9 minutes‚Äù. 
        //(Un jeu de foot dure 90 minutes).
        console.log("EXERCICE 3 * CALCUL ET AFFICHER FREQUENCE APPARITION EVENEMENT ");


        //gameEvents est un objet 
        //Object.values retourne un tableau contenant uniquement les valeurs
        //on extrait les VALEURS de chaque cl√© dans l'objet
        //on les stocke dans la variable gameEventsArray
        const gameEventsArray = Object.values(gameEvents);
        //gameEventsArray √©tant un tableau, on peut obtenir sa longueur 
        const lengthOfgameEventsArray = gameEventsArray.length;
        //on calcule la moyenne en divisant la longueur du match de 90 minutes
        //par la longueur du tableau contenant les √©v√©nements
        const numberOfEvents = 90 / lengthOfgameEventsArray;
        console.log(`Pendant le match il y a eu ${numberOfEvents} √©v√©nements`);
        console.log(`Un √©v√©nement est apparu toutes les ${numberOfEvents} minutes pendant les 90 minutes du match `);

        //EXERCICE 3 * 4_Faire une boucle sur ‚ÄògameEvents‚Äô et afficher pour chaque √©l√©ment 
        //dans la console s‚Äôil s‚Äôest d√©roul√© dans la premi√®re ou deuxi√®me moiti√© du jeu :
        //[PREMI√àRE MOITI√â] 17 . ‚öΩÔ∏è GOAL
        console.log("EXERCICE 3 * FAIRE UNE BOUCLE - AFFICHER POUR CHAQUE EVENEMENT S'IL S'EST DEROULE PENDANT LA 1ERE OU 2EME MOITIE DU JEU");

        //utiliser le tableau gameEventsArray cr√©√© plus haut
        //afin d'acc√©der √† la propri√©t√© length
        for (let i = 0; i < gameEventsArray.length; i++) {

            //si l'√©v√©n√©ment a eu lieu avant la minute 45
            //autrement dit si la valeur de la premi√®re case de l'√©l√©ment <45
            if (gameEventsArray[i][0] <= 45) {
                //alors afficher
                //la minute en prenant la 1√®re case puis l'√©v√©nement en prenant la case 1
                console.log(`PREMIERE MOITE - √† la minute ${gameEventsArray[i][0]} :  Ev√©nement ${gameEventsArray[i][1]}`);
            } else {
                console.log(`DEUXIEME MOITE - √† la minute ${gameEventsArray[i][0]} :  Ev√©nement ${gameEventsArray[i][1]}`);
            }
        }



    </script>




</body>

</html>